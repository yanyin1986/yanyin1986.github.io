ä½ æåˆ°çš„ã€Œåœ¨ iPhone çš„VPNï¼è¯ä¹¦ç®¡ç†ï¼ˆå³â€œè®¾ç½® > é€šç”¨ > VPN ä¸è®¾å¤‡ç®¡ç†â€æˆ–è€…â€œæè¿°æ–‡ä»¶ä¸è®¾å¤‡ç®¡ç†â€ï¼‰é‡Œå¯¼å…¥å­—ä½“ã€è¿™ä¸€æµç¨‹ï¼Œå…³é”®ä¸æ˜¯ VPN çš„ç½‘ç»œåŠŸèƒ½æœ¬èº«ï¼Œè€Œæ˜¯ iOS å¯¹æ‰€æœ‰ é…ç½®æè¿°æ¡£ï¼ˆconfiguration profileï¼‰çš„ç»Ÿä¸€ç®¡ç†æ–¹å¼ï¼Œä»¥åŠå®ƒå¯¹å­—ä½“å®‰è£…æä¾›çš„å®˜æ–¹æœºåˆ¶ã€‚

è¿™é‡Œç®€å•è§£é‡ŠåŸç†ï¼Œå¹¶åˆ—ä¸¾å‡ ç§å¸¸è§çš„å®ç°æ–¹æ³•ã€‚ 

## ğŸ èƒŒååŸç†æ¦‚è§ˆ

- Fontsâ€¯payloadï¼ˆcom.apple.fontï¼‰ï¼šè‹¹æœè‡ªå¸¦æ”¯æŒçš„ iOS é…ç½®æè¿°æ¡£ç±»å‹ï¼Œå¯å°†å•ä¸ª .ttf æˆ– .otf å­—ä½“æ‰“åŒ…åˆ° .mobileconfig ä¸­ï¼Œç”±ç”¨æˆ·æ‰‹åŠ¨å®‰è£…åç³»ç»Ÿå°±å¯è°ƒç”¨ ã€‚ 
- VPN ä¸è¯ä¹¦ç®¡ç†é¡µé¢ï¼šiOS å°†æ‰€æœ‰ç”¨æˆ·æ‰‹åŠ¨å®‰è£…çš„é…ç½®æè¿°æ¡£éƒ½å±•ç¤ºåœ¨ â€œVPN ä¸è®¾å¤‡ç®¡ç† / è¯ä¹¦ä¿¡ä»»â€ é¡µé¢ä¸­ï¼Œå³ä½¿æè¿°æ¡£ä¸­æ²¡æœ‰ VPN æˆ–è¯ä¹¦ payload ä¹Ÿä¸€æ ·å‡ºç°ï¼Œå› æ­¤å¾ˆå¤šäººè¯¯ä»¥ä¸ºæ˜¯é€šè¿‡ VPN å®‰è£…å­—ä½“ ã€‚
- è¯ä¹¦ç­¾åé—®é¢˜ï¼šè‹¥æè¿°æ¡£æœªç­¾åï¼ˆæˆ–ç­¾å‘æ–¹å°šæœªä¿¡ä»»ï¼‰ï¼Œå®‰è£…åè¿˜éœ€åœ¨æ­¤é¡µé¢ã€Œä¿¡ä»»æ ¹è¯ä¹¦ã€ï¼Œæ‰å…è®¸ Fonts payload ç”Ÿæ•ˆã€‚ 
 

## âœ… å®ç°æ–¹å¼ä¸¾ä¾‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ macOS ä¸Šçš„ Apple Configurator 2ï¼ˆå®˜æ–¹ GUI å·¥å…·ï¼‰
1. åœ¨ Mac App Store å®‰è£… Apple Configurator 2ã€‚ 
2. æ‰“å¼€ååˆ›å»ºæ–°é…ç½®æ¡£ï¼ˆâŒ˜Nï¼‰ã€‚ 
3. åœ¨ â€œGeneralâ€ ä¸­è¾“å…¥åç§°ã€æ ‡è¯†ç¬¦ç­‰ã€‚ 
4. æ·»åŠ  Fonts æ¨¡å—ï¼Œé€‰æ‹© .ttf æˆ– .otf å­—ä½“ï¼ˆä¸æ”¯æŒ .ttc/.otcï¼‰ã€‚
   - æ¯ä¸ª Fonts payload ä¸­ä»…èƒ½åŒ…å«ä¸€ä¸ªå­—ä½“æ–‡ä»¶ï¼Œå¤šå­—ä½“éœ€å¤šä¸ª payloadã€‚ 
5.ï¼ˆå¯é€‰ï¼‰å¯æ·»åŠ  Certificate payloadï¼Œç”¨æ¥æ‰“å…¥ä½ çš„ CA æ¥ç­¾åï¼Œé¿å…â€œæœªå—ä¿¡ä»»â€çš„æç¤ºã€‚
6. å¯¼å‡º .mobileconfig æ–‡ä»¶ï¼Œå¯é€‰æ‹© UNSIGNEDï¼ˆå®éªŒï¼‰æˆ– DERâ€‘ç­¾åæ ¼å¼ã€‚
7. å°†æ–‡ä»¶ä¸Šä¼ è‡³ HTTPS é“¾æ¥æˆ–é‚®ä»¶é™„ä»¶ï¼Œé€šè¿‡ Safari ä¸‹è½½ï¼ˆå¿…é¡»ç”± Safari å‘èµ·ï¼‰ã€‚ 
8. å®‰è£…æ—¶ä¾æ¬¡ç‚¹å‡»ï¼šå…è®¸ â†’ \[å·²ä¸‹è½½çš„æè¿°æ¡£/æ³¨å†Œâ€œXXXâ€\] â†’ å®‰è£… â†’ è¾“å…¥è§£é”å¯†ç ã€‚ 
9. å¦‚å«æ ¹è¯ä¹¦ payloadï¼Œåˆ™å¿…é¡»æ‰‹åŠ¨å¯ç”¨ã€Œå®Œå…¨ä¿¡ä»»ã€æ‰è¢«å…è®¸å®‰è£…å­—ä½“ã€‚ 
 
å®‰è£…åï¼Œå¯åœ¨ Notabilityã€Pagesã€Wordã€Textastic ç­‰æ”¯æŒè‡ªå®šä¹‰å­—ä½“çš„ app ä¸­ä½¿ç”¨ã€‚

ğŸ“ æ³¨æ„ï¼š
- å­—ä½“æœ€å¤§å»ºè®®å°äº ~20â€¯MBï¼Œå¦åˆ™ iOS å®‰è£…å®¹æ˜“å¤±è´¥ï¼›
- æè¿°æ¡£æœ‰æ•ˆæœŸçº¦ 2 å¹´ï¼Œè¿‡æœŸåéœ€å¸è½½é‡æ–°å¯¼å…¥ï¼›
- æ— æ³•æ›´æ”¹ iOS é»˜è®¤ç³»ç»Ÿå­—ä½“ï¼Œå¦‚é”å±ã€æ§åˆ¶ä¸­å¿ƒã€Spotlight ç­‰ç•Œé¢ä¿æŒåŸæ ·ã€‚  

### æ–¹æ³•äºŒï¼šä½¿ç”¨ iPhone ä¸Šçš„å¼€æºåº”ç”¨ï¼ˆå¦‚ Fontcaseï¼ŒAnyFontï¼ŒiFont ç­‰ï¼‰ 

è¿™ç±» App ä½¿ç”¨çš„åŸç†ä¸ä¸Šé¢åŸºæœ¬ä¸€è‡´ï¼Œä½†ç®€åŒ–äº†é…ç½®ç”Ÿæˆè¿‡ç¨‹ï¼š 
1. åœ¨ App ä¸­å¯¼å…¥å­—ä½“ï¼ˆ.ttf/.otfï¼‰ï¼›
2. App è‡ªåŠ¨ç”Ÿæˆé…ç½®æ¡£ï¼ˆ.mobileconfigï¼‰å¹¶å¼¹å‡ºæœ¬åœ° HTTP é¡µé¢ï¼Œç‚¹å‡»â€œå®‰è£…â€ï¼›
3. Safari ä¸‹è½½åï¼Œä½ ä¼šçœ‹åˆ° â€œå·²ä¸‹è½½çš„æè¿°æ¡£ XXXâ€ å‡ºç°åœ¨ VPN ä¸è®¾å¤‡ç®¡ç†é¡µé¢ï¼›
4. ç‚¹è¿›å»â€œå®‰è£…â€å³å¯å®Œæˆå­—ä½“å®‰è£…ã€‚
> æœ‰ Reddit ç”¨æˆ·æè¿°ï¼šã€Œåœ¨ App å¯¼å…¥å­—ä½“åï¼Œç‚¹å‡» install ä¼šä¸‹è½½é…ç½®æ¡£ï¼Œç„¶åè¿›å…¥ Settings > VPN & Device Management å°±èƒ½çœ‹åˆ°è¿™ä¸ªå­—ä½“ profileï¼Œç‚¹è¿›å»å®‰è£…ã€ ã€‚ 
5. è¿™äº› App é€šå¸¸è¿˜ä¼šå†…åµŒä¸€ä¸ªå°å‹è¯ä¹¦ payload æˆ–ç­¾åï¼Œä¿éšœé…ç½®æ¡£èƒ½é¡ºåˆ©å®‰è£…ã€‚ 


### æ–¹æ³•ä¸‰ï¼šè‡ªå·±æ­å»ºè„šæœ¬æœåŠ¡å™¨è‡ªåŠ¨ç”Ÿæˆç­¾å .mobileconfig
å¦‚æœä½ å¸Œæœ›æ›´çµæ´»åœ°ç”Ÿæˆå­—ä½“åŒ…ï¼Œå¯æŒ‰ä»¥ä¸‹æµç¨‹è„šæœ¬åŒ–ï¼š 
1. å°† .ttf æˆ– .otf ä»¥ Base64 åµŒå…¥åˆ° XML æ¨¡æ¿çš„ <key>Font</key><data>â€¦</data>ï¼›
2. <key>PayloadType</key><string>com.apple.font</string> å¿…å¡«ï¼› 
3. å¯é€‰æ‹©åŠ ä¸€ä¸ª com.apple.security.root çš„ Certificate payloadï¼› 
4. ç„¶åç”¨ openssl smime -sign ç­¾åï¼Œè¾“å‡º DER æ ¼å¼çš„ .mobileconfigï¼› 
5. æ”¾åˆ°ä½ çš„ HTTPS æœåŠ¡å™¨ï¼Œé€šè¿‡ Safari è®¿é—®ã€‚ 
6. å®‰è£…è¿‡ç¨‹ä¸ Apple Configurator ä¸€æ ·ã€‚ 

ğŸ“Œ æ ·ä¾‹å­—æ®µæ¨¡æ¿ï¼ˆç®€ç•¥ï¼‰ï¼š 
```xml
<dict>
  <key>PayloadType</key><string>Configuration</string>
  <key>PayloadIdentifier</key><string>com.example.myfonts</string>
  <key>PayloadVersion</key><integer>1</integer>
  <key>PayloadDisplayName</key><string>è‡ªå®šä¹‰å­—ä½“</string>
  <key>PayloadContent</key>
  <array>
    <dict>
      <key>PayloadType</key><string>com.apple.font</string>
      <key>Font</key><data>â€¦base64 å­—ä½“å†…å®¹â€¦</data>
      <key>Name</key><string>CustomFont.ttf</string>
    </dict>
    <!-- å¯é€‰ æ’å…¥æ ¹è¯ä¹¦ payload æ”¾è¿™é‡Œ -->
  </array>
</dict>
```

ç„¶åç”¨ï¼š
```shell
openssl smime -sign \
  -in unsigned.mobileconfig \
  -out myfont.mobileconfig \
  -signer your.crt \
  -inkey your.key \
  -certfile ca-chain.crt \
  -outform der -nodetach 
```

ğŸ›  å¸¸è§é—®é¢˜ä¸æ³¨æ„äº‹é¡¹ 
| é—®é¢˜ | è¯´æ˜ |
|-----|-----|
| ç³»ç»Ÿé»˜è®¤å­—ä½“æ— æ³•æ›¿æ¢ | iOS ä¸å…è®¸ä¿®æ”¹ç³»ç»Ÿ UI çš„å­—ä½“ï¼Œåªèƒ½ä¾›ç‰¹å®šåº”ç”¨è°ƒç”¨ä½¿ç”¨ã€‚|
| å¤§å­—ä½“æ–‡ä»¶å®‰è£…å¤±è´¥ | å»ºè®®æ¯ payload <â€¯20 MBï¼›æ•´ä½“æè¿°æ¡£å»ºè®® < 50 MBã€‚ |
| å­—ä½“æœªæ˜¾ç¤ºåœ¨â€œé€šç”¨ > å­—ä½“â€ä¸­ï¼Ÿ | æ­£å¸¸ã€‚è‡ªå®šä¹‰å­—ä½“å®‰è£…åä¸ä¼šå‡ºç°åœ¨â€œæˆ‘çš„å­—ä½“â€åˆ—è¡¨ï¼Œä»…åœ¨æ”¯æŒå­—ä½“é€‰æ‹©çš„åº”ç”¨å†…å¯è§ã€‚ |
| profile æ˜¾ç¤ºâ€œæ¥è‡ªä¸å—ä¿¡ä»»çš„å¼€å‘è€…â€ï¼Ÿ | è¯´æ˜è¯ä¹¦ä¸æ˜¯ Apple ç­¾å‘ï¼Œé¡»åœ¨ã€Œä¿¡æ¯ > è¯ä¹¦ä¿¡ä»»è®¾ç½®ã€å¯ç”¨æ ¹è¯ä¹¦ä¿¡ä»»ã€‚ |
| iOS ç³»ç»Ÿæ‹’ç»å®‰è£… unsigned mobileconfigï¼Ÿ | iOS 16+ ç‰ˆæœ¬è¶Šæ¥è¶Šä¸¥æ ¼ï¼Œé…ç½®æ¡£å»ºè®®ç­¾åï¼ŒåŒæ—¶å¿…é¡»é€šè¿‡ Safari ä¸‹è½½æ‰è¢«ä¿¡ä»»ã€‚ |